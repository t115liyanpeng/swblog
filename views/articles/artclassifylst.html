{{define "artclassifylst"}}
<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <title>test</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="../../static/layui/css/modules/code.css" />
        <link rel="stylesheet" href="../../static/layui/css/layui.css"/>
        <link rel="stylesheet" href="../../static/iconfont.css" />
        <link rel="stylesheet" href="../../static/articles/artlist.css" />
        <link rel="icon" href="../../static/images/favicon.ico"/>
        <link rel="stylesheet" type="text/css" href="../../static/assets/waifu1.css"/>
        <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <script src="../../static/layui/layui.js"></script>
        <script>
            $(document).ready(function(){
               
               $("body").ready(function(){
                   var w=parseInt(document.body.clientWidth)+"px";
                  $("#nav").css("width",w);
                  $("#main").css("width",w);
               });
                
               $(window).resize(function(){
                var w=parseInt(document.body.clientWidth)+"px";
                  $("#nav").css("width",w);
                  $("#main").css("width",w);
               });
              
            });
       </script>
    </head>
    <body>
        {{template "navigate"}}
        <div id="main">
            <div id="sreach">
                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入搜索关键字" class="layui-input">
                <button type="button" class="layui-btn layui-btn-radius">搜索一下</button>
            </div>
            <div style="clear: both;"></div>
        </div>
        <div id="pagercontent">
            <div id="pager"></div>
        </div>
    </body>
    <footer>
        {{template "footer"}}
    </footer>
    <script>
        layui.use(['element','laypage','layer'],function(){
            var element = layui.element;
             //分页控件
            var laypage = layui.laypage;
            //弹出层
            var layer=layui.layer;
            //执行一个laypage实例
            laypage.render({
              elem: 'pager' 
              ,count:'{{.ArtCount}}' //数据总数，从服务端得到
              ,limit:'{{.PageSize}}'
              ,jump: function(obj, first){
                //obj包含了当前分页的所有参数，比如：
                console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                console.log(obj.limit); //得到每页显示的条数

                //首次不执行
                if(!first){
                  //do something
                  var urlstr='/article/articlefile?index='+obj.curr;
                  var loading = layer.msg('加载中...', {icon: 16, shade: 0.3, time:0});
                  $.ajax({
                      url:urlstr,
                      type:'get',
                      async:true,
                      timeout:5000,
                      success:function(datas){
                        layer.close(loading);
                        $(".layui-timeline").html(datas);
                      },
                      error:function(){
                        layer.close(loading);
                        layer.open({
                                title: '服务器无响应',
                                content: "服务器跑到月球啦！！"
                        });
                        //if(obj.curr>1){
                        //    obj.curr=parseInt(obj.curr)-1
                        //}
                      }
                    });
                }
              }
            });
        });
    </script>
</html>
{{end}}
